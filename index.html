<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="build/css/style.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
  integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <title>Settlement Generator</title>
</head>
<body>
  <header class="header">
  </header>
  <main class="main">
    <div class="container">
      <section class="row">
        <div class="col-12 col-md-4 col-lg-2">
          <div class="button-wrapper">
            <button id="updateBtn" class="btn btn-primary">
              <i class="fas fa-dice"></i>Reroll
            </button>
          </div>
        </div>

        <div class="col-6 col-md-4 col-lg-5">
          <div class="input-group select-wrapper">
            <div class="input-group-prepend">
              <label class="input-group-text" for="selectAlignment">Alignment</label>
            </div>
            <select name="selectAlignment" id="selectAlignment" class="custom-select">
              <option value="any">Random</option>
              <option value="LG">Lawful Good</option>
              <option value="NG">Neutral Good</option>
              <option value="CG">Chaotic Good</option>
              <option value="LN">Lawful Neutral</option>
              <option value="TN">True Neutral</option>
              <option value="CN">Chaotic Neutral</option>
              <option value="LE">Lawful Evil</option>
              <option value="NE">Neutral Evil</option>
              <option value="CE">Chaotic Evil</option>
            </select>
          </div>
        </div>

        <div class="col-6 col-md-4 col-lg-5">
          <div class="input-group select-wrapper">
            <div class="input-group-prepend">
              <label class="input-group-text" for="selectSize">Size</label>
            </div>

            <select name="selectSize" id="selectSize" class="custom-select">
              <option value="any">Random</option>
              <option value="0">Thorp</option>
              <option value="1">Hamlet</option>
              <option value="2">Village</option>
              <option value="3">Small Town</option>
              <option value="4">Large Town</option>
              <option value="5">Small City</option>
              <option value="6">Large City</option>
              <option value="7">Metropolis</option>
            </select>
          </div>
        </div>
      </section>

      <section class="row">

        <div class="col-12">
          <h2 id="name">Settlement</h2>
        </div>

        <div class="col-12 col-md-8 settlement-statistics">
          <div class="row">
            <div class="col-12 col-sm-7">
              <span class="popper">
                <b><span id="alignment">?</span></b>
              </span>
              <span class="popup">
                <p>A settlement’s alignment not only describes the community’s general personality and attitude, but also influences its modifiers.</p>
                <ul>
                  <li>A lawful component to a settlement’s alignment increases its law modifier by 1.</li>
                  <li>A good component increases its society modifier by 1.</li>
                  <li>A chaotic component increases its crime modifier by 1.</li>
                  <li>An evil component increases its corruption modifier by 1.</li>
                  <li>A neutral component increases its lore modifier by 1 (a truly neutral city gains an increase of 2 to its lore modifier).</li>
                </ul>
                <p>Alignment never modifies a settlement’s economy modifier.</p>
              </span>
              <span> - </span>
              <span id="type">???</span>
              <p><b>Population:</b> <span id="population-range"></span></p>
              <p><b>Government:</b> <span id="short-government"></span></p>
              <p><b>Qualities:</b> <span id="short-qualities"></span></p>

              <p class="spells-and-commerce">
                <span class="popper"><b>Spellcasting total: </b><span id="spellcastingTotal"></span></span>
                <span class="popup">Usually equal to size with any modifications from government, qualities and disadvantages. Maximum 8th level.</span>
                <br>
                <span class="popper"><b>Base value total: </b><span id="baseValueTotal"></span> gp</span>
                <span class="popup">There is a 75% chance that any item of this value or lower can be found for sale in the settlement with little effort. If an item is not available, a new check to determine if the item has become available can be made in 1 week.</span>
                <br>
                <span class="popper"><b>Purchase limit total: </b><span id="purchaseLimitTotal"></span> gp</span>
                <span class="popup">A settlement’s purchase limit is the most money a shop in the settlement can spend to purchase any single item from a character.<br>If the character wish to sell an item worth more than a settlement’s purchase limit, they’ll either need to settle for a lower price, travel to A larger city, or search for a specific buyer in the city with deeper pockets.</span>
              </p>

              <p class="magic-items">
                <span><b>Minor: </b><span id="minorItems"></span></span><br>
                <span><b>Medium: </b><span id="mediumItems"></span></span><br>
                <span><b>Major: </b><span id="majorItems"></span></span><br>

                <small class="popper"><span>About magic items</span></small>
                <span class="popup">Follows the pattern: <br>-, 1d4, 1d6, 2d4, 3d4, 3d4, 4d4, 4d4, (*)<br>Adjust accordingly if the settlement receives an increase or decrease in magic item available. In a Metropolis there are no defined limit to the amount of Minor items, but Medium and Major cap out at 4d4 items before modifiers.</span>
              </p>
            </div>

            <div class="col-12 col-sm-5">
              <div class="statistic">
                <span class="popper"><b>Corruption:</b> <span id="corruption-score">?</span></span>
                <span class="popup">A settlement’s corruption modifies all Bluff checks made against city officials or guards and all Stealth checks made outside (but not inside buildings or underground).</span>
              </div>
              <div class="statistic">
                <span class="popper"><b>Crime:</b> <span id="crime-score">?</span></span>
                <span class="popup">The atmosphere generated by a settlement’s crime level applies as a modifier on Sense Motive checks to avoid being bluffed and to Sleight of Hand checks made to pick pockets.</span>
              </div>
              <div class="statistic">
                <span class="popper"><b>Economy:</b> <span id="economy-score">?</span></span>
                <span class="popup">A settlement’s economy helps its citizens make money, and thus it applies as a modifier on all Craft, Perform, and Profession checks made to generate income.</span>
              </div>
              <div class="statistic">
                <span class="popper"><b>Law:</b> <span id="law-score">?</span></span>
                <span class="popup">A settlement’s law modifier applies on Intimidate checks made to force an opponent to act friendly, Diplomacy checks against government officials, or Diplomacy checks made to call on the city guard.</span>
              </div>
              <div class="statistic">
                <span class="popper"><b>Lore:</b> <span id="lore-score">?</span></span>
                <span class="popup">A settlement’s lore modifier applies on Diplomacy checks made to gather information and Knowledge checks made using the city’s resources to do research when using a library.</span>
              </div>
              <div class="statistic">
                <span class="popper"><b>Society:</b> <span id="society-score">?</span></span>
                <span class="popup">A settlement’s society modifier applies on all Disguise checks, as well as on Diplomacy checks made to alter the attitude of any non-government official.</span>
              </div>
              <br>
              <div class="statistic">
                <span class="popper"><b>Danger:</b> <span id="danger-score">?</span></span>
                <span class="popup">A settlement’s danger value is a number that gives a general idea of how dangerous it is to live in the settlement. A settlement’s base danger value depends on its type.</span>
              </div>
            </div>

            <div class="col-12">
              <details>
                <summary><b>Settlement summary</b></summary>
                <p id="applied-details">
                </details>
              </p>
            </div>
          </div>
        </div>

        <div class="col-12 col-md-4">
          <div class="governments">
            <b>Government</b> <span id="governmentCount"></span>

            <div id="selected-governments">
              <!-- Government -->
            </div>
          </div>
          <div class="qualities">
            <b>Qualities</b> <span id="qualityCount"></span>
            <div id="selected-qualities">
              <!-- Qualities -->
            </div>
          </div>
          <div class="disadvantages">
            <b>Disadvantages</b>
            <div id="selected-disadvantages">
              <!-- Qualities -->
            </div>
          </div>
        </div>
      </section>
      <br>

      <section class="row">
        <div class="col-12">
          <h2>Modifiers</h2>
          <nav class="nav nav-tabs" id="nav-tab" role="tablist">
            <button class="nav-link active" id="nav-governments-tab" data-bs-toggle="tab" data-bs-target="#nav-governments" type="button" role="tab" aria-controls="nav-governments" aria-selected="true">Governments</button>

            <button class="nav-link" id="nav-qualities-tab" data-bs-toggle="tab" data-bs-target="#nav-qualities" type="button" role="tab" aria-controls="nav-qualities" aria-selected="false">Qualities</button>

            <button class="nav-link" id="nav-disadvantages-tab" data-bs-toggle="tab" data-bs-target="#nav-disadvantages" type="button" role="tab" aria-controls="nav-disadvantages" aria-selected="false">Disadvantages</button>

            <button class="nav-link" id="nav-wiki-tab" data-bs-toggle="tab" data-bs-target="#nav-wiki" type="button" role="tab" aria-controls="nav-wiki" aria-selected="false">Wiki template</button>
          </nav>
          <div class="tab-content" id="nav-tabContent">

            <div class="tab-pane fade show active" id="nav-governments" role="tabpanel" aria-labelledby="nav-governments-tab">
              <div class="governments">
                <div id="available-governments" class="row">
                  <!-- Generated -->
                </div>
              </div>
            </div>

            <div class="tab-pane fade" id="nav-qualities" role="tabpanel" aria-labelledby="nav-qualities-tab">
              <div id="available-qualities" class="row">
                <!-- Generated -->
              </div>
            </div>

            <div class="tab-pane fade" id="nav-disadvantages" role="tabpanel" aria-labelledby="nav-disadvantages-tab">
              <div id="available-disadvantages" class="row">
                <!-- Generated -->
              </div>
            </div>

            <div class="tab-pane fade" id="nav-wiki" role="tabpanel" aria-labelledby="nav-wiki-tab">
              <div class="wiki-template">
                <textarea class="form-control" type="text" name="wiki-template" id="wiki-template" readonly rows="10"></textarea>
                <div id="copyToClipboard" class="clipboard icon"><i class="fas fa-copy"></i></div>
              </div>
            </div>

          </div>
        </div>
      </section>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="row">

        <div class="col-12">
          <h2>Links</h2>
        </div>

        <div class="col-12 col-md-6">
          <ul id="footer-link-list">
            <li>
              <a href="http://mortuus.no/wiki">Back to the wiki</a>
            </li>
          </ul>
        </div>

        <div class="col-12 col-md-6 text-right">
          <ul>
            <li><a href="https://www.d20pfsrd.com/gamemastering/other-rules/kingdom-building/settlements/">Rules as per the SRD</a></li>
          </ul>
          <p>Plans: Add more setting themed qualities and disadvantages (fey menace, outsider incursion, cults, monster).</p>
        </div>

      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/js/index.js" type="module" crossorigin=""></script>
</body>

</html>